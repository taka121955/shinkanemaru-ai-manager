import streamlit as st
import pandas as pd

st.set_page_config(page_title="📝 勝敗入力フォーム", layout="wide")
st.title("📝 勝敗入力フォーム（エクセル風）")

# 仮のAI予想データ（実際は自動取得に切り替え予定）
ai_predictions = [
    {"競艇場": "唐津", "レース番号": "12R", "式別": "2連単", "投票内容": "1-5", "的中率": "84%", "金額": 100},
    {"競艇場": "若松", "レース番号": "11R", "式別": "3連単", "投票内容": "4-5-6", "的中率": "82%", "金額": 100},
    {"競艇場": "住之江", "レース番号": "10R", "式別": "単勝", "投票内容": "3", "的中率": "81%", "金額": 100},
    {"競艇場": "丸亀", "レース番号": "9R", "式別": "2連単", "投票内容": "2-1", "的中率": "80%", "金額": 100},
    {"競艇場": "平和島", "レース番号": "8R", "式別": "3連単", "投票内容": "3-2-6", "的中率": "79%", "金額": 100},
    {"競艇場": "福岡", "レース番号": "7R", "式別": "2連単", "投票内容": "1-2", "的中率": "77%", "金額": 100},
    {"競艇場": "常滑", "レース番号": "6R", "式別": "単勝", "投票内容": "4", "的中率": "76%", "金額": 100},
    {"競艇場": "芦屋", "レース番号": "5R", "式別": "3連単", "投票内容": "5-6-1", "的中率": "75%", "金額": 100},
    {"競艇場": "尼崎", "レース番号": "4R", "式別": "3連単", "投票内容": "6-4-3", "的中率": "74%", "金額": 100},
    {"競艇場": "津",   "レース番号": "3R", "式別": "単勝", "投票内容": "2", "的中率": "73%", "金額": 100},
]

# 結果の入力欄追加
for i, row in enumerate(ai_predictions):
    col1, col2, col3, col4, col5, col6, col7 = st.columns([1.2, 1, 1, 1.2, 1, 1, 1])
    with col1: st.markdown(f"🏁 **{row['競艇場']}**")
    with col2: st.markdown(f"{row['レース番号']}")
    with col3: st.markdown(f"{row['式別']}")
    with col4: st.markdown(f"🎯 {row['投票内容']}")
    with col5: st.markdown(f"{row['的中率']}")
    with col6: st.markdown(f"💴 {row['金額']}円")
    with col7:
        result = st.selectbox(
            label="結果", 
            options=["未入力", "的中", "不的中"], 
            key=f"result_{i}", 
            index=0
        )
        ai_predictions[i]["結果"] = result

# 登録ボタン
if st.button("✅ まとめて登録"):
    df = pd.DataFrame(ai_predictions)
    st.success("✅ 登録完了！")
    st.dataframe(df)
